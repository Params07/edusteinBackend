"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[285,960,523],{74960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var l=a(65043),s=a(81278),o=a(90523),i=a(70579);const n=e=>{let{selectedBootcamp:t,setSelectedBootcamp:a,isMulti:n=!1,isBootcampActive:c}=e;const[r,d]=(0,l.useState)([]);let m=`/bootcamps/bootcamp?isBootcampActive=${c}`;const{data:u=[]}=(0,o.default)(m);(0,l.useEffect)((()=>{if(u){const e=u.map((e=>({label:e.title,value:e.id})));d(e),!t&&e.length>0&&!n&&a(e[0])}}),[u,t,n,c]);return(0,i.jsx)(s.Ay,{className:"w-64 h-8",name:"bootcamp",value:t,options:r,isMulti:n,placeholder:"Bootcamp Name",onChange:e=>{a(e)}})}},37285:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(65043),s=a(74960),o=a(90523),i=a(32464),n=a(70579);const c=e=>{let{action:t}=e;const[a,c]=(0,l.useState)([]),[r,d]=(0,l.useState)(null),[m,u]=(0,l.useState)(i.i.PARTICULAR_BOOTCAMP),[p,x]=(0,l.useState)(i.e.FLAT),[b,h]=(0,l.useState)(""),[f,v]=(0,l.useState)(0),[A,N]=(0,l.useState)(null),[j,E]=(0,l.useState)(""),[g,C]=(0,l.useState)(!0),[R,S]=(0,l.useState)({}),[_,T]=(0,l.useState)(""),P=(0,l.useMemo)((()=>{if(a.length<1)return null;const e=a.map((e=>e.value)).join(",");return N(e),`/registrations/getemails?bootcampIds=${e}`}),[a]),{data:y}=(0,o.default)(P);(0,l.useEffect)((()=>{if(y&&y.length>0&&m!=i.i.PARTICULAR_USER_AND_BOOTCAMP){const e=y.map((e=>e.email)).join(",");d(e)}}),[y]),(0,l.useEffect)((()=>{const e=(new Date).toISOString().slice(0,10);T(e)}),[]);return(0,n.jsx)("div",{children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a={};if(m!==i.i.PARTICULAR_BOOTCAMP&&m!=i.i.PARTICULAR_USER_AND_BOOTCAMP||A||(a.bootcampId="Bootcamp selection is required"),m!==i.i.PARTICULAR_USERS&&m!=i.i.PARTICULAR_USER_AND_BOOTCAMP||r||(a.emails="Emails are required for this promo type"),(!b||b<=0)&&(a.discountValue="Enter a valid discount value"),p===i.e.PERCENTAGE&&(!b||b<=0||b>=100)&&(a.discountValue="Enter a valid maximum discount value"),p==i.e.UPTO_PERCENTAGE&&f<=0&&(a.maxDiscount="enter the valid max discount"),p!==i.e.UPTO_PERCENTAGE&&v(0),S(a),0===Object.keys(a).length){const a={promo_type:m,discount_type:p,discount_value:parseFloat(b),max_discount:f?parseFloat(f):null,bootcamp_id:A||null,emails:r||null,expiration_date:j||null,is_active:g};console.log(a),t(a),e.target.reset()}},children:[(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)("label",{htmlFor:"promo-type",className:"text-lg font-semibold mb-2",children:"Promo Type:"}),(0,n.jsx)("select",{id:"promo-type",name:"promo-type",value:m,onChange:e=>u(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(i.i).map((e=>{let[t,a]=e;return(0,n.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)("label",{htmlFor:"discount-type",className:"text-lg font-semibold mb-2",children:"Discount Type:"}),(0,n.jsx)("select",{id:"discount-type",name:"discount-type",value:p,onChange:e=>x(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(i.e).map((e=>{let[t,a]=e;return(0,n.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsxs)("label",{htmlFor:"discount-value",className:"text-lg font-semibold mb-2",children:["Discount ",p===i.e.FLAT?"Amount":"Percentage",":"]}),(0,n.jsx)("input",{type:"number",id:"discount-value",name:"discount-value",value:b,onChange:e=>h(e.target.value),className:"p-2 border rounded "+(R.discountValue?"border-red-500":"border-black"),required:!0,min:"1"}),R.discountValue&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:R.discountValue})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)("label",{htmlFor:"max-discount",className:"text-lg font-semibold mb-2",children:"Max Discount:"}),(0,n.jsx)("input",{type:"number",id:"max-discount",name:"max-discount",value:f,onChange:e=>v(e.target.value),className:"p-2 border border-black rounded",disabled:p!==i.e.UPTO_PERCENTAGE,readOnly:p!==i.e.UPTO_PERCENTAGE,placeholder:p!==i.e.UPTO_PERCENTAGE?"N/A":""}),R.maxDiscount&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:R.maxDiscount})]}),m&&m!==i.i.ANYONE&&(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsxs)("label",{htmlFor:"bootcamp",className:"text-lg font-semibold mb-2",children:[m===i.i.PARTICULAR_USERS?"Export from Bootcamps":"Bootcamps",":"]}),(0,n.jsx)(s.default,{selectedBootcamp:a,setSelectedBootcamp:c,isMulti:!0,isBootcampActive:i.i.PARTICULAR_USERS!=m}),R.bootcampId&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:R.bootcampId})]}),(m===i.i.PARTICULAR_USERS||m==i.i.PARTICULAR_USER_AND_BOOTCAMP)&&(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)("label",{htmlFor:"emails",className:"text-lg font-semibold mb-2",children:"Enter Emails:"}),(0,n.jsx)("input",{type:"text",id:"emails",name:"emails",value:r,onChange:e=>d(e.target.value),className:"p-2 border rounded "+(R.emails?"border-red-500":"border-black")}),R.emails&&(0,n.jsx)("span",{className:"text-red-500 text-sm",children:R.emails})]}),(0,n.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,n.jsx)("label",{htmlFor:"expiration-date",className:"text-lg font-semibold mb-2",children:"Expiration Date:"}),(0,n.jsx)("input",{type:"date",id:"expiration-date",name:"expiration-date",value:j,min:_,onChange:e=>E(e.target.value),className:"p-2 border rounded"})]}),(0,n.jsxs)("div",{className:"flex items-center mb-4",children:[(0,n.jsx)("input",{type:"checkbox",id:"is-active",name:"is-active",checked:g,onChange:e=>C(e.target.checked),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"is-active",className:"text-lg font-semibold",children:"Is Active"})]}),(0,n.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Promo Code"})]})})}},90523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var l=a(65043),s=a(86213);const o=e=>{const[t,a]=(0,l.useState)(!1),[o,i]=(0,l.useState)([]),[n,c]=(0,l.useState)(null),r=(0,l.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){a(!0),c(null);try{const a=await s.A.get(e,{params:t,withCredentials:!0});i(a.data)}catch(l){c(l)}finally{a(!1)}}}),[e]);return(0,l.useEffect)((()=>{e&&r()}),[r]),{fetchData:r,data:o,loading:t,error:n}}}}]);
//# sourceMappingURL=285.97fb223e.chunk.js.map