"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[982,960,285,523,718],{19982:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});a(65043);var s=a(37285),l=a(23894),o=a(67718),n=a(70579);const c=()=>{const{post:e,loading:t,error:a}=(0,o.default)("/promocode/addNewPromoCode");return(0,n.jsx)(s.default,{action:async t=>{try{await e(t);return(0,l.y)({success:!0,message:"Success created"}),!0}catch(a){return console.error("There was a problem with the axios request:",a),(0,l.y)({success:!1,message:"Upload failed"}),!1}}})}},74960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(65043),l=a(81278),o=a(90523),n=a(70579);const c=e=>{let{selectedBootcamp:t,setSelectedBootcamp:a,isMulti:c=!1,isBootcampActive:i}=e;const[r,d]=(0,s.useState)([]);let m=`/bootcamps/bootcamp?isBootcampActive=${i}`;const{data:u=[]}=(0,o.default)(m);(0,s.useEffect)((()=>{if(u){const e=u.map((e=>({label:e.title,value:e.id})));d(e),!t&&e.length>0&&!c&&a(e[0])}}),[u,t,c,i]);return(0,n.jsx)(l.Ay,{className:"w-64 h-8",name:"bootcamp",value:t,options:r,isMulti:c,placeholder:"Bootcamp Name",onChange:e=>{a(e)}})}},37285:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(65043),l=a(74960),o=a(90523),n=a(32464),c=a(70579);const i=e=>{let{action:t}=e;const[a,i]=(0,s.useState)([]),[r,d]=(0,s.useState)(null),[m,u]=(0,s.useState)(n.i.PARTICULAR_BOOTCAMP),[p,x]=(0,s.useState)(n.e.FLAT),[b,h]=(0,s.useState)(""),[f,v]=(0,s.useState)(0),[A,N]=(0,s.useState)(null),[g,j]=(0,s.useState)(""),[C,E]=(0,s.useState)(!0),[S,R]=(0,s.useState)({}),[T,y]=(0,s.useState)(""),_=(0,s.useMemo)((()=>{if(a.length<1)return null;const e=a.map((e=>e.value)).join(",");return N(e),`/registrations/getemails?bootcampIds=${e}`}),[a]),{data:P}=(0,o.default)(_);(0,s.useEffect)((()=>{if(P&&P.length>0&&m!=n.i.PARTICULAR_USER_AND_BOOTCAMP){const e=P.map((e=>e.email)).join(",");d(e)}}),[P]),(0,s.useEffect)((()=>{const e=(new Date).toISOString().slice(0,10);y(e)}),[]);return(0,c.jsx)("div",{children:(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a={};if(m!==n.i.PARTICULAR_BOOTCAMP&&m!=n.i.PARTICULAR_USER_AND_BOOTCAMP||A||(a.bootcampId="Bootcamp selection is required"),m!==n.i.PARTICULAR_USERS&&m!=n.i.PARTICULAR_USER_AND_BOOTCAMP||r||(a.emails="Emails are required for this promo type"),(!b||b<=0)&&(a.discountValue="Enter a valid discount value"),p===n.e.PERCENTAGE&&(!b||b<=0||b>=100)&&(a.discountValue="Enter a valid maximum discount value"),p==n.e.UPTO_PERCENTAGE&&f<=0&&(a.maxDiscount="enter the valid max discount"),p!==n.e.UPTO_PERCENTAGE&&v(0),R(a),0===Object.keys(a).length){const a={promo_type:m,discount_type:p,discount_value:parseFloat(b),max_discount:f?parseFloat(f):null,bootcamp_id:A||null,emails:r||null,expiration_date:g||null,is_active:C};console.log(a),t(a),e.target.reset()}},children:[(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"promo-type",className:"text-lg font-semibold mb-2",children:"Promo Type:"}),(0,c.jsx)("select",{id:"promo-type",name:"promo-type",value:m,onChange:e=>u(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(n.i).map((e=>{let[t,a]=e;return(0,c.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"discount-type",className:"text-lg font-semibold mb-2",children:"Discount Type:"}),(0,c.jsx)("select",{id:"discount-type",name:"discount-type",value:p,onChange:e=>x(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(n.e).map((e=>{let[t,a]=e;return(0,c.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsxs)("label",{htmlFor:"discount-value",className:"text-lg font-semibold mb-2",children:["Discount ",p===n.e.FLAT?"Amount":"Percentage",":"]}),(0,c.jsx)("input",{type:"number",id:"discount-value",name:"discount-value",value:b,onChange:e=>h(e.target.value),className:"p-2 border rounded "+(S.discountValue?"border-red-500":"border-black"),required:!0,min:"1"}),S.discountValue&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:S.discountValue})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"max-discount",className:"text-lg font-semibold mb-2",children:"Max Discount:"}),(0,c.jsx)("input",{type:"number",id:"max-discount",name:"max-discount",value:f,onChange:e=>v(e.target.value),className:"p-2 border border-black rounded",disabled:p!==n.e.UPTO_PERCENTAGE,readOnly:p!==n.e.UPTO_PERCENTAGE,placeholder:p!==n.e.UPTO_PERCENTAGE?"N/A":""}),S.maxDiscount&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:S.maxDiscount})]}),m&&m!==n.i.ANYONE&&(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsxs)("label",{htmlFor:"bootcamp",className:"text-lg font-semibold mb-2",children:[m===n.i.PARTICULAR_USERS?"Export from Bootcamps":"Bootcamps",":"]}),(0,c.jsx)(l.default,{selectedBootcamp:a,setSelectedBootcamp:i,isMulti:!0,isBootcampActive:n.i.PARTICULAR_USERS!=m}),S.bootcampId&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:S.bootcampId})]}),(m===n.i.PARTICULAR_USERS||m==n.i.PARTICULAR_USER_AND_BOOTCAMP)&&(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"emails",className:"text-lg font-semibold mb-2",children:"Enter Emails:"}),(0,c.jsx)("input",{type:"text",id:"emails",name:"emails",value:r,onChange:e=>d(e.target.value),className:"p-2 border rounded "+(S.emails?"border-red-500":"border-black")}),S.emails&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:S.emails})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"expiration-date",className:"text-lg font-semibold mb-2",children:"Expiration Date:"}),(0,c.jsx)("input",{type:"date",id:"expiration-date",name:"expiration-date",value:g,min:T,onChange:e=>j(e.target.value),className:"p-2 border rounded"})]}),(0,c.jsxs)("div",{className:"flex items-center mb-4",children:[(0,c.jsx)("input",{type:"checkbox",id:"is-active",name:"is-active",checked:C,onChange:e=>E(e.target.checked),className:"mr-2"}),(0,c.jsx)("label",{htmlFor:"is-active",className:"text-lg font-semibold",children:"Is Active"})]}),(0,c.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Promo Code"})]})})}},90523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(86213);const o=e=>{const[t,a]=(0,s.useState)(!1),[o,n]=(0,s.useState)([]),[c,i]=(0,s.useState)(null),r=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){a(!0),i(null);try{const a=await l.A.get(e,{params:t,withCredentials:!0});n(a.data)}catch(s){i(s)}finally{a(!1)}}}),[e]);return(0,s.useEffect)((()=>{e&&r()}),[r]),{fetchData:r,data:o,loading:t,error:c}}},67718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(86213);const o=e=>{const[t,a]=(0,s.useState)(!1),[o,n]=(0,s.useState)(null);return{post:async t=>{a(!0),n(null);try{const s=t instanceof FormData,o=await l.A.post(e,t,{withCredentials:!0,headers:s?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return a(!1),o.data}catch(s){throw n(s),a(!1),s}},loading:t,error:o}}}}]);
//# sourceMappingURL=982.a88a80ab.chunk.js.map