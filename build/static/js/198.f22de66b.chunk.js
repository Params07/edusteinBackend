"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[198,816,718],{16816:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(92823),n=a.n(l),r=(a(25884),a(70579));const o=e=>{let{initialData:t={},action:a}=e;const[l,o]=(0,s.useState)(""),[d,i]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[u,p]=(0,s.useState)(""),[x,h]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),[g,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)(""),[D,y]=(0,s.useState)({}),[w,S]=(0,s.useState)(""),C=(0,s.useRef)(null),k=Object.keys(t).length>0;(0,s.useEffect)((()=>{const e=(new Date).toISOString().slice(0,16);S(e)}),[]),(0,s.useEffect)((()=>{if(k){const e=e=>{if(!e)return"";return new Date(e).toISOString().slice(0,16)};S(e(t.start_date)),o(t.title||""),i(e(t.start_date)),m(e(t.end_date)),p(t.additional_info||""),v(t.amount||""),h(t.image_path||""),b(t.image_path||"")}}),[t]);const I=()=>{o(t.title||""),i(t.startDate||""),m(t.endDate||""),p(t.additionalInfo||""),h(t.image_path||null),b(t.image_path?t.image:null),v(t.amount||""),j(!1),y({})};return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:t.title?"Edit Bootcamp":"Add Bootcamp"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new Date;const n={};if(t&&(s=w),g?d||(n.startDate="Start date is required."):new Date(d)<=s&&(n.startDate="Start date must be in the future."),new Date(c)<=new Date(d)&&(n.endDate="End date must be at least 1 hour after start date."),u.length<20&&(n.additionalInfo="Additional info should be more than 20 characters."),null==x&&(n.image="Image field cannot be empty."),N||(n.amount="Amount field cannot be empty."),y(n),Object.keys(n).length)return;console.log(x);const r=new FormData;r.append("title",l),r.append("startDate",d),r.append("endDate",c),r.append("additionalInfo",u),r.append("image_path",x),r.append("amount",N),a(r)&&I()},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"title",className:"text-lg font-semibold mb-2",children:"Bootcamp Title:"}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:l,onChange:e=>o(e.target.value),className:"p-2 border rounded",placeholder:"Enter Bootcamp Title",required:!0})]}),(0,r.jsxs)("div",{className:'"flex flex-col mb-4" ',children:[(0,r.jsxs)("div",{className:(g?"hidden":"block")+" flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"start-date",className:"text-lg font-semibold mb-2",children:"Start Date and Time:"}),(0,r.jsx)("input",{type:"datetime-local",id:"start-date",name:"start-date",min:w,value:d,onChange:e=>i(e.target.value),className:"p-2 border rounded "+(D.startDate?"border-red-500":""),disabled:g,required:!0})]}),D.startDate&&(0,r.jsx)("p",{className:"text-red-500",children:D.startDate}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"use-current-time",checked:g,onChange:e=>{const t=e.target.checked;j(t),t?i(w):(i(""),m(""))},className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"use-current-time",className:"text-lg font-semibold",children:"Use Current Time"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"end-date",className:"text-lg font-semibold mb-2",children:"End Date and Time:"}),(0,r.jsx)("input",{type:"datetime-local",id:"end-date",name:"end-date",value:c,min:((e,t)=>{if(!e)return"";const a=new Date(e);return a.setHours(a.getHours()+t),a.toISOString().slice(0,16)})(""===d?w:d,1),onChange:e=>m(e.target.value),className:"p-2 border rounded "+(D.endDate?"border-red-500":""),required:!0}),D.endDate&&(0,r.jsx)("p",{className:"text-red-500",children:D.endDate})]}),(0,r.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"image",className:"text-lg font-semibold mb-2",children:"Upload Image:"}),(0,r.jsx)("input",{type:"text",id:"image",name:"image",value:x,onChange:e=>{h(e.target.value),b(e.target.value)},className:"p-2 border rounded"}),D.image&&(0,r.jsx)("p",{className:"text-red-500",children:D.image}),f&&(0,r.jsx)("img",{src:f,alt:"Preview",className:"mt-4 w-24 h-32"})]}),(0,r.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"additional-info",className:"text-lg font-semibold mb-2",children:"Additional Info:"}),(0,r.jsx)(n(),{ref:C,id:"additional-info",value:u,onChange:p,className:"p-2 border rounded"}),D.additionalInfo&&(0,r.jsx)("p",{className:"text-red-500",children:D.additionalInfo})]}),(0,r.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"text-lg font-semibold mb-2",children:"Amount:"}),(0,r.jsx)("input",{type:"number",id:"amount",name:"amount",value:N,onChange:e=>v(e.target.value),className:"p-2 border rounded "+(D.amount?"border-red-500":""),placeholder:"Enter Amount",required:!0}),D.amount&&(0,r.jsx)("p",{className:"text-red-500",children:D.amount})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:k?"Save":"Add Bootcamp"}),k&&(0,r.jsx)("button",{type:"button",onClick:I,className:"bg-gray-300 text-black p-2 rounded",children:"Cancel"})]})]})]})}},82776:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(90523);const n=e=>{const[t,a]=(0,s.useState)(null),n=0!==e?`/bootcamps/bootcamp?id=${e}`:null,{fetchData:r,data:o,loading:d,error:i}=(0,l.default)(n);return(0,s.useEffect)((()=>{n&&r()}),[n,r]),(0,s.useEffect)((()=>{o&&a(o)}),[o]),{bootcampData:t,loading:d,error:i}}},67718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(86213);const n=e=>{const[t,a]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null);return{post:async t=>{a(!0),r(null);try{const s=t instanceof FormData;console.log(s);const n=await l.A.post(e,t,{withCredentials:!0,headers:s?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return a(!1),n.data}catch(s){throw r(s),a(!1),s}},loading:t,error:n}}},86198:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(65043),l=(a(82776),a(16816)),n=a(45394),r=a(23894),o=a(67718),d=a(90523),i=a(70579);const c=e=>{let{id:t,action:a}=e;console.log(t);const c=(0,s.useMemo)((()=>`/bootcamps/bootcamp?id=${t}`),[t]),{data:m,loading:u,error:p}=(0,d.default)(c),{post:x}=(0,o.default)("/bootcamps/updateBootcamp");return(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center h-full",children:(0,i.jsxs)("div",{className:"bg-white w-11/12 md:w-2/3 lg:w-1/2 p-4 rounded-lg h-5/6 overflow-y-auto",children:[(0,i.jsx)("span",{className:"w-full flex justify-end",children:(0,i.jsx)(n.$8F,{onClick:()=>{a(!0)},className:"cursor-pointer text-4xl text-red-500"})}),m&&m[0]&&(0,i.jsx)(l.default,{initialData:m[0],action:async e=>{if(m&&m[0]){e.append("id",t);for(let t of e.entries())console.log(t[0]+": "+t[1]);try{await x(e);return(0,r.y)({success:!0,message:"Success update"}),a(!0),!0}catch(p){return console.error("There was a problem with the axios request:",p),(0,r.y)({success:!1,message:p.message}),!1}}}})]})})}}}]);
//# sourceMappingURL=198.f22de66b.chunk.js.map