"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[116,982,960,638,343,350,285,523,718],{19982:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});a(65043);var s=a(37285),l=a(23894),o=a(67718),r=a(70579);const c=()=>{const{post:e,loading:t,error:a}=(0,o.default)("/promocode/addNewPromoCode");return(0,r.jsx)(s.default,{action:async t=>{try{await e(t);return(0,l.y)({success:!0,message:"Success created"}),!0}catch(a){return console.error("There was a problem with the axios request:",a),(0,l.y)({success:!1,message:"Upload failed"}),!1}}})}},74960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(65043),l=a(81278),o=a(90523),r=a(70579);const c=e=>{let{selectedBootcamp:t,setSelectedBootcamp:a,isMulti:c=!1,isBootcampActive:n}=e;const[i,d]=(0,s.useState)([]);let m=`/bootcamps/bootcamp?isBootcampActive=${n}`;const{data:u=[]}=(0,o.default)(m);(0,s.useEffect)((()=>{if(u){const e=u.map((e=>({label:e.title,value:e.id})));d(e),!t&&e.length>0&&!c&&a(e[0])}}),[u,t,c,n]);return(0,r.jsx)(l.Ay,{className:"w-64 h-8",name:"bootcamp",value:t,options:i,isMulti:c,placeholder:"Bootcamp Name",onChange:e=>{a(e)}})}},80638:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(65043);var s=a(70579);const l=e=>{let{data:t,component:a,action:l}=e;if(!t||0===t.length)return(0,s.jsx)("p",{children:"No data available"});const o=["Action",...Object.keys(t[0])];return(0,s.jsx)("div",{className:"overflow-x-auto m-4",children:(0,s.jsx)("div",{className:"overflow-y-auto h-[500px] no-scrollbar",children:(0,s.jsxs)("table",{className:"min-w-full border border-collapse ",children:[(0,s.jsx)("thead",{className:"bg-gray-300 border-b w-full sticky top-0 z-5 h-16",children:(0,s.jsx)("tr",{children:o.map((e=>(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-300 text-center bg-gray-200",children:"Action"===e?l:e},e)))})}),(0,s.jsx)("tbody",{children:t.map(((e,t)=>(0,s.jsx)("tr",{className:"py-2 px-4 border-b   border-gray-300 text-center",children:o.map((t=>"Action"===t?(0,s.jsx)("td",{className:"py-2 px-4 border-gray-300 border-b text-center",children:a(e)},t):(0,s.jsx)("td",{className:"py-2 px-4 border-gray-300 border-b text-center",children:e[t]},t)))},t)))})]})})})}},61343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(65043),l=a(90523),o=a(80638),r=a(67718),c=a(77350),n=a(23894),i=a(70579);const d=()=>{const[e,t]=(0,s.useState)(!1),[a,d]=(0,s.useState)(0),{data:m=[],fetchData:u}=(0,l.default)("/promocode/getPromoCodes"),{post:x,error:p}=(0,r.default)("/promocode/alterPromocode");const b=(0,s.useMemo)((()=>m.map((e=>({...e,expiration_date:new Date(e.expiration_date).toISOString().slice(0,10),is_active:(0,i.jsx)("span",{name:e.is_active?"Active":"Closed",className:"px-2 py-1 text-white rounded "+(e.is_active?"bg-green-500":"bg-red-500"),children:e.is_active?"Active":"Closed"})})))),[m]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(o.default,{data:b,component:e=>(console.log(e.is_active.props.name),(0,i.jsx)("button",{onClick:()=>{t(!0),d(e.id)},className:"text-white px-8 py-1 rounded text-sm "+("Active"==e.is_active.props.name?"bg-red-400":"bg-green-400 "),children:"Active"==e.is_active.props.name?"close":"set-active"})),action:"Action"})}),e?(0,i.jsx)(c.default,{message:"Do you want to change state of  the promocode",yesAction:async()=>{try{if(a>0){await x({promocodeID:a});(0,n.y)({success:!0,message:"updated"}),u()}}catch(e){console.error(e),(0,n.y)({success:!1,message:p})}finally{t(!1)}},noAction:()=>t(!1)}):""]})}},77350:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(65043);var s=a(70579);const l=e=>{let{message:t,yesAction:a,noAction:l}=e;return(0,s.jsx)("div",{className:"fixed  inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center  ",children:(0,s.jsxs)("div",{className:"bg-white w-max p-4 rounded-lg h-36 grid gap-6 ",children:[(0,s.jsx)("p",{className:"font-semibold text-lg px-4",children:t}),(0,s.jsxs)("p",{className:"w-full flex space-x-4",children:[(0,s.jsx)("button",{className:"w-full py-2 bg-red-500 border-2 border-red-500 hover:bg-red-400 text-white rounded-md",onClick:()=>a(),children:"Yes"}),(0,s.jsx)("button",{className:"w-full py-2 bg-gray-300  rounded-md border-2 border-gray-300 hover:bg-gray-200 ",onClick:()=>{l()},children:"No"})]})]})})}},37285:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(74960),o=a(90523),r=a(32464),c=a(70579);const n=e=>{let{action:t}=e;const[a,n]=(0,s.useState)([]),[i,d]=(0,s.useState)(null),[m,u]=(0,s.useState)(r.i.PARTICULAR_BOOTCAMP),[x,p]=(0,s.useState)(r.e.FLAT),[b,h]=(0,s.useState)(""),[f,g]=(0,s.useState)(0),[v,j]=(0,s.useState)(null),[N,y]=(0,s.useState)(""),[A,C]=(0,s.useState)(!0),[_,S]=(0,s.useState)({}),[E,P]=(0,s.useState)(""),T=(0,s.useMemo)((()=>{if(a.length<1)return null;const e=a.map((e=>e.value)).join(",");return j(e),`/registrations/getemails?bootcampIds=${e}`}),[a]),{data:R}=(0,o.default)(T);(0,s.useEffect)((()=>{if(R&&R.length>0&&m!=r.i.PARTICULAR_USER_AND_BOOTCAMP){const e=R.map((e=>e.email)).join(",");d(e)}}),[R]),(0,s.useEffect)((()=>{const e=(new Date).toISOString().slice(0,10);P(e)}),[]);return(0,c.jsx)("div",{children:(0,c.jsxs)("form",{onSubmit:e=>{e.preventDefault();const a={};if(m!==r.i.PARTICULAR_BOOTCAMP&&m!=r.i.PARTICULAR_USER_AND_BOOTCAMP||v||(a.bootcampId="Bootcamp selection is required"),m!==r.i.PARTICULAR_USERS&&m!=r.i.PARTICULAR_USER_AND_BOOTCAMP||i||(a.emails="Emails are required for this promo type"),(!b||b<=0)&&(a.discountValue="Enter a valid discount value"),x===r.e.PERCENTAGE&&(!b||b<=0||b>=100)&&(a.discountValue="Enter a valid maximum discount value"),x==r.e.UPTO_PERCENTAGE&&f<=0&&(a.maxDiscount="enter the valid max discount"),x!==r.e.UPTO_PERCENTAGE&&g(0),S(a),0===Object.keys(a).length){const e={promo_type:m,discount_type:x,discount_value:parseFloat(b),max_discount:f?parseFloat(f):null,bootcamp_id:v||null,emails:i||null,expiration_date:N||null,is_active:A};t(e),n([]),d(null),u(r.i.PARTICULAR_BOOTCAMP),p(r.e.FLAT),h(""),g(0),j(null),y(""),C(!0)}},children:[(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"promo-type",className:"text-lg font-semibold mb-2",children:"Promo Type:"}),(0,c.jsx)("select",{id:"promo-type",name:"promo-type",value:m,onChange:e=>u(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(r.i).map((e=>{let[t,a]=e;return(0,c.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"discount-type",className:"text-lg font-semibold mb-2",children:"Discount Type:"}),(0,c.jsx)("select",{id:"discount-type",name:"discount-type",value:x,onChange:e=>p(e.target.value),className:"p-2 border border-black rounded",children:Object.entries(r.e).map((e=>{let[t,a]=e;return(0,c.jsx)("option",{value:a,children:t.replace("_"," ")},t)}))})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsxs)("label",{htmlFor:"discount-value",className:"text-lg font-semibold mb-2",children:["Discount ",x===r.e.FLAT?"Amount":"Percentage",":"]}),(0,c.jsx)("input",{type:"number",id:"discount-value",name:"discount-value",value:b,onChange:e=>h(e.target.value),className:"p-2 border rounded "+(_.discountValue?"border-red-500":"border-black"),required:!0,min:"1"}),_.discountValue&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:_.discountValue})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"max-discount",className:"text-lg font-semibold mb-2",children:"Max Discount:"}),(0,c.jsx)("input",{type:"number",id:"max-discount",name:"max-discount",value:f,onChange:e=>g(e.target.value),className:"p-2 border border-black rounded",disabled:x!==r.e.UPTO_PERCENTAGE,readOnly:x!==r.e.UPTO_PERCENTAGE,placeholder:x!==r.e.UPTO_PERCENTAGE?"N/A":""}),_.maxDiscount&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:_.maxDiscount})]}),m&&m!==r.i.ANYONE&&(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsxs)("label",{htmlFor:"bootcamp",className:"text-lg font-semibold mb-2",children:[m===r.i.PARTICULAR_USERS?"Export from Bootcamps":"Bootcamps",":"]}),(0,c.jsx)(l.default,{selectedBootcamp:a,setSelectedBootcamp:n,isMulti:!0,isBootcampActive:r.i.PARTICULAR_USERS!=m}),_.bootcampId&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:_.bootcampId})]}),(m===r.i.PARTICULAR_USERS||m==r.i.PARTICULAR_USER_AND_BOOTCAMP)&&(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"emails",className:"text-lg font-semibold mb-2",children:"Enter Emails:"}),(0,c.jsx)("input",{type:"text",id:"emails",name:"emails",value:i,onChange:e=>d(e.target.value),className:"p-2 border rounded "+(_.emails?"border-red-500":"border-black")}),_.emails&&(0,c.jsx)("span",{className:"text-red-500 text-sm",children:_.emails})]}),(0,c.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,c.jsx)("label",{htmlFor:"expiration-date",className:"text-lg font-semibold mb-2",children:"Expiration Date:"}),(0,c.jsx)("input",{type:"date",id:"expiration-date",name:"expiration-date",value:N,min:E,onChange:e=>y(e.target.value),className:"p-2 border rounded"})]}),(0,c.jsxs)("div",{className:"flex items-center mb-4",children:[(0,c.jsx)("input",{type:"checkbox",id:"is-active",name:"is-active",checked:A,onChange:e=>C(e.target.checked),className:"mr-2"}),(0,c.jsx)("label",{htmlFor:"is-active",className:"text-lg font-semibold",children:"Is Active"})]}),(0,c.jsx)("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add Promo Code"})]})})}},90523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(86213);const o=e=>{const[t,a]=(0,s.useState)(!1),[o,r]=(0,s.useState)([]),[c,n]=(0,s.useState)(null),i=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){a(!0),n(null);try{const a=await l.A.get(e,{params:t,withCredentials:!0});r(a.data)}catch(s){n(s)}finally{a(!1)}}}),[e]);return(0,s.useEffect)((()=>{e&&i()}),[i]),{fetchData:i,data:o,loading:t,error:c}}},67718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(86213);const o=e=>{const[t,a]=(0,s.useState)(!1),[o,r]=(0,s.useState)(null);return{post:async t=>{a(!0),r(null);try{const s=t instanceof FormData,o=await l.A.post(e,t,{withCredentials:!0,headers:s?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return a(!1),o.data}catch(s){throw r(s),a(!1),s}},loading:t,error:o}}},8116:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(65043),l=a(19982),o=a(61343),r=a(70579);const c=()=>{const e=["Add Promo Code","Edit Promo Code"],[t,a]=(0,s.useState)(e[0]);return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full space-y-8",children:[(0,r.jsx)("div",{className:"h-16 w-full flex justify-center items-center shadow-lg",children:(0,r.jsx)("p",{className:"text-xl font-bold",children:"PromoCode"})}),(0,r.jsxs)("div",{className:"flex flex-col px-8",children:[(0,r.jsx)("div",{className:"h-12",children:(0,r.jsxs)("div",{className:"flex  space-x-2",children:[(0,r.jsx)("p",{className:"text-xl font-semibold cursor-pointer "+(t==e[0]?"text-black font-bold":"text-gray-600"),onClick:()=>{a(e[0])},children:e[0]}),(0,r.jsx)("p",{className:"text-xl font-semibold",children:"/"}),(0,r.jsx)("p",{className:"text-xl font-semibold cursor-pointer "+(t==e[1]?"text-black font-bold":"text-gray-600"),onClick:()=>{a(e[1])},children:e[1]})]})}),t&&t===e[0]?(0,r.jsx)(l.default,{}):(0,r.jsx)(o.default,{})]})]})}}}]);
//# sourceMappingURL=116.0448b862.chunk.js.map