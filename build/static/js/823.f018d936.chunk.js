"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[823,960,376,638,523,718],{74960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(81278),n=a(90523),r=a(70579);const o=e=>{let{selectedBootcamp:t,setSelectedBootcamp:a,isMulti:o=!1}=e;const[c,d]=(0,s.useState)([]),{data:i=[]}=(0,n.default)("/bootcamps/bootcamp?id=0");(0,s.useEffect)((()=>{if(i){const e=i.map((e=>({label:e.title,value:e.id})));d(e),!t&&e.length>0&&!o&&a(e[0])}}),[i,t,o]);return(0,r.jsx)(l.Ay,{className:"w-64 h-8",name:"bootcamp",value:t,options:c,isMulti:o,placeholder:"Bootcamp Name",onChange:e=>{a(e)}})}},17376:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(65043),l=a(86213),n=a(23894);const r=e=>{const[t,a]=(0,s.useState)(!1);return{downloadExcelFile:async t=>{try{a(!0);const s=await l.A.post("/createExcel",t,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=n,r.setAttribute("download",e+".xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),a(!1)}catch(s){a(!1),(0,n.y)({success:!1,message:"Error in downloading file"}),console.error("Error downloading file:",s)}},downloading:t}}},80638:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(65043);var s=a(70579);const l=e=>{let{data:t,component:a,action:l}=e;if(!t||0===t.length)return(0,s.jsx)("p",{children:"No data available"});const n=["Action",...Object.keys(t[0])];return(0,s.jsx)("div",{className:"overflow-x-auto m-4",children:(0,s.jsx)("div",{className:"overflow-y-auto h-[500px] no-scrollbar",children:(0,s.jsxs)("table",{className:"min-w-full border border-collapse border-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-100 border-b w-full sticky top-0 z-5 h-16",children:(0,s.jsx)("tr",{children:n.map((e=>(0,s.jsx)("th",{className:"py-2 px-4 border-b text-center bg-gray-100",children:"Action"===e?l:e},e)))})}),(0,s.jsx)("tbody",{children:t.map(((e,t)=>(0,s.jsx)("tr",{className:"py-2 px-4 border-b text-center",children:n.map((t=>"Action"===t?(0,s.jsx)("td",{className:"py-2 px-4 border-b text-center",children:a(e)},t):(0,s.jsx)("td",{className:"py-2 px-4 border-b text-center",children:e[t]},t)))},t)))})]})})})}},60823:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var s=a(65043),l=a(90523),n=a(74960),r=a(80638),o=a(67718),c=a(23894),d=a(49342),i=a(17376),u=a(70579);const p=()=>{const[e,t]=(0,s.useState)([]),[a,p]=(0,s.useState)([]),[h,x]=(0,s.useState)(!1),[m,f]=(0,s.useState)(null),[b,g]=(0,s.useState)(0),[y,j]=(0,s.useState)([]),[w,N]=(0,s.useState)(!1),[v,S]=(0,s.useState)(0),[k,C]=(0,s.useState)(0),{downloadExcelFile:A,downloading:R}=(0,i.default)("refundAll_data"),[E,D]=(0,s.useState)([]),B=(0,s.useMemo)((()=>{if(S(0),e.length<1)return null;return`/refundInitiator/getData?bootcampIds=${e.map((e=>e.value)).join(",")}`}),[b]),{data:F,loading:I,error:L}=(0,l.default)(B),{post:M,loading:U,error:O}=(0,o.default)("/refundInitiator/refundInitiateAll");(0,s.useEffect)((()=>{if(S(0),w&&a){const e=a.map((e=>e.id));j(e)}else j([])}),[w]),(0,s.useEffect)((()=>{D([]),N(!1),F&&(p(F),x(I),f(L))}),[F,I,L]);return(0,u.jsxs)("div",{className:"flex flex-col space-y-8",children:[(0,u.jsxs)("div",{className:"flex space-x-4 items-start",children:[(0,u.jsx)(n.default,{selectedBootcamp:e,setSelectedBootcamp:t,isMulti:!0}),(0,u.jsx)("button",{className:"px-5 py-2 bg-black text-white rounded border-2 hover:bg-gray-700 "+(h?"opacity-50 cursor-not-allowed":""),onClick:()=>g(b+1),disabled:h,children:h?"Fetching":"Fetch Data"}),y&&y.length>0&&(0,u.jsx)("button",{className:"px-5 py-2 bg-green-600 text-white rounded border-2 border-green-600 hover:bg-green-400",onClick:()=>(async()=>{S(0);const e=a.filter((e=>y.includes(e.id))).map((e=>({...e,razorPayID:e.paymentid})));if(e.length>0){console.log(e);try{const t=await M({userDetails:e}),{results:a}=t;console.log(a);const s=a.reduce(((e,t)=>Number(e)+Number("success"==t.status?1:0)),0);C(s),S(a.length),D(a)}catch(m){(0,c.y)({success:!1,message:"an error occured"}),console.log(m),S(0),D([])}}})(),disabled:U,children:U?"Refunding":"Refund All"}),0!==v&&(0,u.jsxs)("div",{className:"flex flex-col space-y-2 h-full",children:[(0,u.jsxs)("p",{children:["Processed Refund Requests: ",v]}),(0,u.jsxs)("p",{className:"flex space-x-2",children:[(0,u.jsxs)("p",{children:["Number of Refunds Success: ",k]}),(0,u.jsx)(d.RXm,{className:"text-green-600 text-xl"})]}),(0,u.jsxs)("p",{className:"flex space-x-2 items-center h-4 ",children:[(0,u.jsxs)("p",{className:"",children:["Number of Refunds Failed: ",v-k]}),(0,u.jsx)("p",{className:"text-lg font-semibold text-red-600 ",children:"X"})]})]}),E&&E.length>0&&(0,u.jsx)("button",{className:"px-5 py-2 rounded-md hover:bg-gray-700 border-2 text-white bg-black",disabled:R,onClick:async()=>{A(E)},children:"Download record"})]}),(0,u.jsx)("div",{children:a&&a.length>0&&(0,u.jsx)(r.default,{data:a,component:e=>(0,u.jsx)("input",{className:"cursor-pointer",type:"checkbox",checked:y.includes(e.id),onChange:()=>{return t=e.id,S(0),void j((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),action:(0,u.jsx)("input",{type:"checkbox",checked:w,onChange:()=>{S(0),D([]),N((e=>!e))}})})})]})}},90523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(86213);const n=e=>{const[t,a]=(0,s.useState)(!1),[n,r]=(0,s.useState)([]),[o,c]=(0,s.useState)(null),d=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){a(!0),c(null);try{const a=await l.A.get(e,{params:t,withCredentials:!0});r(a.data)}catch(s){c(s)}finally{a(!1)}}}),[e]);return(0,s.useEffect)((()=>{e&&d()}),[d]),{fetchData:d,data:n,loading:t,error:o}}},67718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(86213);const n=e=>{const[t,a]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null);return{post:async t=>{a(!0),r(null);try{const s=t instanceof FormData;console.log(s);const n=await l.A.post(e,t,{withCredentials:!0,headers:s?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return a(!1),n.data}catch(s){throw r(s),a(!1),s}},loading:t,error:n}}}}]);
//# sourceMappingURL=823.f018d936.chunk.js.map