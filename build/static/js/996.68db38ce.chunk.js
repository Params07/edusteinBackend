"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[996,816],{16816:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var l=a(65043),s=a(92823),n=a.n(s),d=(a(25884),a(70579));const r=e=>{let{initialData:t={},action:a}=e;const[s,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[c,m]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[p,h]=(0,l.useState)(null),[b,f]=(0,l.useState)(null),[g,j]=(0,l.useState)(!1),[N,v]=(0,l.useState)(""),[D,S]=(0,l.useState)({}),[y,w]=(0,l.useState)(""),k=(0,l.useRef)(null),C=Object.keys(t).length>0;(0,l.useEffect)((()=>{const e=(new Date).toISOString().slice(0,16);w(e)}),[]),(0,l.useEffect)((()=>{if(C){const e=e=>{if(!e)return"";return new Date(e).toISOString().slice(0,16)};w(e(t.start_date)),r(t.title||""),o(e(t.start_date)),m(e(t.end_date)),x(t.additional_info||""),v(t.amount||""),h(t.image_path||""),f(t.image_path||"")}}),[t]);const I=()=>{r(t.title||""),o(t.startDate||""),m(t.endDate||""),x(t.additionalInfo||""),h(t.image_path||null),f(t.image_path?t.image:null),v(t.amount||""),j(!1),S({})};return(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4",children:t.title?"Edit Bootcamp":"Add Bootcamp"}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault();let l=new Date;const n={};if(t&&(l=y),g?i||(n.startDate="Start date is required."):new Date(i)<=l&&(n.startDate="Start date must be in the future."),new Date(c)<=new Date(i)&&(n.endDate="End date must be at least 1 hour after start date."),u.length<20&&(n.additionalInfo="Additional info should be more than 20 characters."),null==p&&(n.image="Image field cannot be empty."),N||(n.amount="Amount field cannot be empty."),S(n),Object.keys(n).length)return;console.log(p);const d=new FormData;d.append("title",s),d.append("startDate",i),d.append("endDate",c),d.append("additionalInfo",u),d.append("image_path",p),d.append("amount",N),a(d)&&I()},className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"title",className:"text-lg font-semibold mb-2",children:"Bootcamp Title:"}),(0,d.jsx)("input",{type:"text",id:"title",name:"title",value:s,onChange:e=>r(e.target.value),className:"p-2 border rounded",placeholder:"Enter Bootcamp Title",required:!0})]}),(0,d.jsxs)("div",{className:'"flex flex-col mb-4" ',children:[(0,d.jsxs)("div",{className:(g?"hidden":"block")+" flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"start-date",className:"text-lg font-semibold mb-2",children:"Start Date and Time:"}),(0,d.jsx)("input",{type:"datetime-local",id:"start-date",name:"start-date",min:y,value:i,onChange:e=>o(e.target.value),className:"p-2 border rounded "+(D.startDate?"border-red-500":""),disabled:g,required:!0})]}),D.startDate&&(0,d.jsx)("p",{className:"text-red-500",children:D.startDate}),(0,d.jsxs)("div",{className:"flex items-center mt-2",children:[(0,d.jsx)("input",{type:"checkbox",id:"use-current-time",checked:g,onChange:e=>{const t=e.target.checked;j(t),t?o(y):(o(""),m(""))},className:"mr-2"}),(0,d.jsx)("label",{htmlFor:"use-current-time",className:"text-lg font-semibold",children:"Use Current Time"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"end-date",className:"text-lg font-semibold mb-2",children:"End Date and Time:"}),(0,d.jsx)("input",{type:"datetime-local",id:"end-date",name:"end-date",value:c,min:((e,t)=>{if(!e)return"";const a=new Date(e);return a.setHours(a.getHours()+t),a.toISOString().slice(0,16)})(""===i?y:i,1),onChange:e=>m(e.target.value),className:"p-2 border rounded "+(D.endDate?"border-red-500":""),required:!0}),D.endDate&&(0,d.jsx)("p",{className:"text-red-500",children:D.endDate})]}),(0,d.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"image",className:"text-lg font-semibold mb-2",children:"Upload Image:"}),(0,d.jsx)("input",{type:"text",id:"image",name:"image",value:p,onChange:e=>{h(e.target.value),f(e.target.value)},className:"p-2 border rounded"}),D.image&&(0,d.jsx)("p",{className:"text-red-500",children:D.image}),b&&(0,d.jsx)("img",{src:b,alt:"Preview",className:"mt-4 w-24 h-32"})]}),(0,d.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"additional-info",className:"text-lg font-semibold mb-2",children:"Additional Info:"}),(0,d.jsx)(n(),{ref:k,id:"additional-info",value:u,onChange:x,className:"p-2 border rounded"}),D.additionalInfo&&(0,d.jsx)("p",{className:"text-red-500",children:D.additionalInfo})]}),(0,d.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,d.jsx)("label",{htmlFor:"amount",className:"text-lg font-semibold mb-2",children:"Amount:"}),(0,d.jsx)("input",{type:"number",id:"amount",name:"amount",value:N,onChange:e=>v(e.target.value),className:"p-2 border rounded "+(D.amount?"border-red-500":""),placeholder:"Enter Amount",required:!0}),D.amount&&(0,d.jsx)("p",{className:"text-red-500",children:D.amount})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:C?"Save":"Add Bootcamp"}),C&&(0,d.jsx)("button",{type:"button",onClick:I,className:"bg-gray-300 text-black p-2 rounded",children:"Cancel"})]})]})]})}},70996:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var l=a(16816),s=a(23894),n=(a(91036),a(92342),a(74654)),d=(a(65043),a(70579));const r=()=>{const{post:e,loading:t,error:a}=(0,n.A)("/bootcamps/addBootcamp");return(0,d.jsx)(l.default,{data:{},action:async t=>{try{await e(t);return(0,s.y)({success:!0,message:"Success uploaded"}),!0}catch(a){return console.error("There was a problem with the axios request:",a),(0,s.y)({success:!1,message:"Upload failed"}),!1}}})}}}]);
//# sourceMappingURL=996.68db38ce.chunk.js.map