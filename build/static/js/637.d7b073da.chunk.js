"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[637,960,376,638,597,956,523,718],{74960:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(65043),l=a(81278),n=a(90523),o=a(70579);const d=e=>{let{selectedBootcamp:t,setSelectedBootcamp:a,isMulti:d=!1,isBootcampActive:r}=e;const[c,i]=(0,s.useState)([]);let u=`/bootcamps/bootcamp?isBootcampActive=${r}`;const{data:m=[]}=(0,n.default)(u);(0,s.useEffect)((()=>{if(m){const e=m.map((e=>({label:e.title,value:e.id})));i(e),!t&&e.length>0&&!d&&a(e[0])}}),[m,t,d,r]);return(0,o.jsx)(l.Ay,{className:"w-64 h-8",name:"bootcamp",value:t,options:c,isMulti:d,placeholder:"Bootcamp Name",onChange:e=>{a(e)}})}},17376:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(65043),l=a(86213),n=a(23894);const o=e=>{const[t,a]=(0,s.useState)(!1);return{downloadExcelFile:async t=>{try{a(!0);const s=await l.A.post("/createExcel",t,{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([s.data])),o=document.createElement("a");o.href=n,o.setAttribute("download",e+".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(n),a(!1)}catch(s){a(!1),(0,n.y)({success:!1,message:"Error in downloading file"}),console.error("Error downloading file:",s)}},downloading:t}}},80638:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(65043);var s=a(70579);const l=e=>{let{data:t,component:a,action:l}=e;if(!t||0===t.length)return(0,s.jsx)("p",{children:"No data available"});const n=["Action",...Object.keys(t[0])];return(0,s.jsx)("div",{className:"overflow-x-auto m-4",children:(0,s.jsx)("div",{className:"overflow-y-auto h-[500px] no-scrollbar",children:(0,s.jsxs)("table",{className:"min-w-full border border-collapse ",children:[(0,s.jsx)("thead",{className:"bg-gray-300 border-b w-full sticky top-0 z-5 h-16",children:(0,s.jsx)("tr",{children:n.map((e=>(0,s.jsx)("th",{className:"py-2 px-4 border-b border-gray-300 text-center bg-gray-200",children:"Action"===e?l:e},e)))})}),(0,s.jsx)("tbody",{children:t.map(((e,t)=>(0,s.jsx)("tr",{className:"py-2 px-4 border-b   border-gray-300 text-center",children:n.map((t=>"Action"===t?(0,s.jsx)("td",{className:"py-2 px-4 border-gray-300 border-b text-center",children:a(e)},t):(0,s.jsx)("td",{className:"py-2 px-4 border-gray-300 border-b text-center",children:e[t]},t)))},t)))})]})})})}},87597:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(65043),l=a(92823),n=a.n(l),o=(a(25884),a(67718)),d=a(70579);const r=e=>{let{emails:t,onClose:a,showPopup:l}=e;const[r,c]=(0,s.useState)(""),[i,u]=(0,s.useState)(""),[m,p]=(0,s.useState)([]),[b,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)({}),{post:g,loading:j,error:y}=(0,o.default)("/send-email"),[w,v]=(0,s.useState)("now"),N=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,[S,k]=(0,s.useState)(N(new Date));return(0,d.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex justify-center items-center",children:(0,d.jsxs)("div",{className:"bg-white w-11/12 md:w-2/3 lg:w-1/2 p-4 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-lg font-bold",children:"Draft Email"}),(0,d.jsx)("button",{onClick:a,className:"text-xl font-bold",children:"\xd7"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"To:"}),(0,d.jsx)("div",{className:"border p-2 rounded",children:t.join(", ")})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Subject:"}),(0,d.jsx)("input",{type:"text",value:r,required:!0,onChange:e=>c(e.target.value),className:"w-full border border-gray-300 p-2 rounded"})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Body:"}),(0,d.jsx)(n(),{value:i,onChange:u}),x.content&&(0,d.jsxs)("p",{className:"text-red-300",children:[" ",x.content]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Attach Files:"}),(0,d.jsx)("input",{type:"file",multiple:!0,onChange:e=>{p(Array.from(e.target.files))},className:"w-full border border-gray-300 p-2 rounded"}),m.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold mt-2",children:"Selected Files:"}),(0,d.jsx)("ul",{children:m.map(((e,t)=>(0,d.jsx)("li",{children:e.name},t)))})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Schedule Email:"}),(0,d.jsxs)("select",{value:w,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 p-2 rounded",children:[(0,d.jsx)("option",{value:"now",children:"Send Now"}),(0,d.jsx)("option",{value:"schedule",children:"Schedule for Later"})]}),"schedule"===w&&(0,d.jsxs)("div",{className:"mt-2",children:[(0,d.jsx)("label",{className:"block text-sm font-bold mb-2",children:"Schedule Date & Time:"}),(0,d.jsx)("input",{type:"datetime-local",min:N(new Date),value:S,onChange:e=>k(e.target.value),className:"w-full border border-gray-300 p-2 rounded"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,d.jsx)("button",{onClick:a,className:"bg-red-500 text-white px-4 py-2 rounded mr-2",children:"Cancel"}),(0,d.jsx)("button",{onClick:async()=>{const e={};if(!i)return e.content="cant send empty email",void f(e);f(e),h(!0);const s=new FormData;if(s.append("subject",r),s.append("message",i),s.append("to",JSON.stringify(t)),m.forEach((e=>{s.append("files",e)})),"schedule"===w){const e=new Date,t=new Date(S),a=198e5,l=(new Date(t.getTime()-a),t.getTime()-e.getTime());s.append("startDelay",l)}else s.append("startDelay",0);try{await g(s),l({success:!0,message:"email sent"}),a()}catch(y){console.error("Failed to send emails:",y),l({success:!1,message:"Couldnt send email"})}finally{h(!1)}},className:"bg-blue-500 text-white px-4 py-2 rounded "+(j||b?"opacity-50 cursor-not-allowed":""),disabled:j||b,children:j||b?"Sending...":"Send"})]}),y&&(0,d.jsxs)("p",{className:"text-red-500 mt-2",children:["Error: ",y.message]})]})})}},6956:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(90523);const n=e=>{let{bootcampId:t}=e;const[a,n]=(0,s.useState)([]),[o,d]=(0,s.useState)(!1),r=0!==t?`/registrations/registrations?bootcampId=${t}`:null,{fetchData:c,data:i,loading:u,error:m}=(0,l.default)(r);return(0,s.useEffect)((()=>{d(0!==t)}),[t]),(0,s.useEffect)((()=>{o&&c()}),[o,c]),(0,s.useEffect)((()=>{i&&n(i)}),[i]),a}},90523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(86213);const n=e=>{const[t,a]=(0,s.useState)(!1),[n,o]=(0,s.useState)([]),[d,r]=(0,s.useState)(null),c=(0,s.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){a(!0),r(null);try{const a=await l.A.get(e,{params:t,withCredentials:!0});o(a.data)}catch(s){r(s)}finally{a(!1)}}}),[e]);return(0,s.useEffect)((()=>{e&&c()}),[c]),{fetchData:c,data:n,loading:t,error:d}}},67718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(65043),l=a(86213);const n=e=>{const[t,a]=(0,s.useState)(!1),[n,o]=(0,s.useState)(null);return{post:async t=>{a(!0),o(null);try{const s=t instanceof FormData,n=await l.A.post(e,t,{withCredentials:!0,headers:s?{"Content-Type":"multipart/form-data"}:{"Content-Type":"application/json"}});return a(!1),n.data}catch(s){throw o(s),a(!1),s}},loading:t,error:n}}},53637:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(65043),l=a(87597),n=a(23894),o=a(6956),d=a(80638),r=(a(90523),a(17376)),c=a(74960),i=a(70579);const u=()=>{const[e,t]=(0,s.useState)(null),[a,u]=(0,s.useState)([]),[m,p]=(0,s.useState)(!1),[b,h]=(0,s.useState)([]),[x,f]=(0,s.useState)(!1),{downloadExcelFile:g,downloading:j}=(0,r.default)("registration_data"),y=(0,o.default)({bootcampId:e?e.value:0});(0,s.useEffect)((()=>{if(m&&y){const e=y.map((e=>e.id));u(e)}else u([])}),[m]);return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"w-full flex items-center justify-between shadow-md py-6 px-4 h-24 mb-6",children:[(0,i.jsx)("p",{className:"text-xl font-bold",children:"Registrations Data"}),(0,i.jsx)(c.default,{selectedBootcamp:e,setSelectedBootcamp:t})]}),(0,i.jsx)("div",{className:"pl-5 pb-3",children:0!==a.length&&(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{className:"bg-black px-5 py-2 text-white rounded-md",onClick:()=>{(()=>{const e=y.filter((e=>a.includes(e.id))).map((e=>e.email));h(e),f(!0)})()},children:"Send Mail"}),(0,i.jsx)("button",{disabled:j,className:"bg-black px-5 py-2 text-white rounded-md",onClick:()=>{(async()=>{const e=y.filter((e=>a.includes(e.id))).map((e=>e));g(e)})()},children:j?"Downloading":"Download"})]})}),y&&(0,i.jsx)(d.default,{data:y,component:e=>(0,i.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),action:(0,i.jsx)("input",{type:"checkbox",checked:m,onChange:()=>{p((e=>!e))}})}),x&&(0,i.jsx)(l.default,{emails:b,onClose:()=>f(!1),showPopup:n.y})]})}}}]);
//# sourceMappingURL=637.d7b073da.chunk.js.map